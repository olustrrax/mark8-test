{"ast":null,"code":"import \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nvar __jsx = React.createElement;\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  width: 90px;\\n  height: 31.76px;\\n  left: 20vw;\\n  top: 12.18px;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 56px;\\n  background: #002240;\\n  position: absolute;\\n  left: 0px;\\n  top: 0px;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  min-height: 10vh;\\n  margin-top: 120px;\\n  padding: 0 20vw;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  max-width: 1019px;\\n  height: 296px;\\n  margin: auto;\\n  /* bg card */\\n\\n  background: #FFFFFF;\\n  /* Border */\\n\\n  border: 1px solid #E5E5E5;\\n  box-sizing: border-box;\\n  border-radius: 6px;\\n  .ant-card-body {\\n    padding: 20px 24px;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: auto;\\n  height: auto;\\n  top: 0px;\\n  margin: 2vw 0;\\n  /* bg card */\\n\\n  background: #FFFFFF;\\n  /* Border */\\n\\n  border: 0.5px solid #E5E5E5;\\n  box-sizing: border-box;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 30vw;\\n  height: 104px;\\n  left: 0px;\\n\\n  /* bg card */\\n\\n  background: #FFFFFF;\\n  /* Border */\\n  display: flex;\\n  border: 1px solid #E5E5E5;\\n  box-sizing: border-box;\\n  border-radius: 6px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  width: auto;\\n  height: 88px;\\n  left: 0px;\\n  top: 0px;\\n\\n  /* bg card */\\n\\n  background: #FFFFFF;\\n  /* Border */\\n\\n  border: 0.5px solid #E5E5E5;\\n  box-sizing: border-box;\\n  div.box{\\n    background: #F3F5F8;\\n    height: 88px;\\n    display: flex;\\n  }\\n  p.update{\\n    color: #0089FF;\\n    margin: auto 1vw;\\n    line-height: 0;\\n  }\\n  h2{\\n    margin: auto 2vw;\\n  }\\n  h2.list{\\n    width: 70%;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React from \"react\";\nimport { InboxOutlined, ExclamationCircleFilled } from '@ant-design/icons';\nvar Header = _Layout.Header;\nimport { useState } from 'react';\nimport TableData from \"../components/TableData\";\nimport styled from \"styled-components\";\nimport axios from 'axios';\n\nvar csvToArray = function csvToArray(text) {\n  var row = [],\n      c = 0,\n      i = 0,\n      ans = '',\n      res = [];\n\n  var _iterator = _createForOfIteratorHelper(text),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var d = _step.value;\n\n      if (d === ',' && !c) {\n        row.push(ans);\n        ans = d = '';\n      } else if (d === '\"') {\n        if (!c) c = 1;else c = 0;\n        d = '';\n      } else if ((++i === text.length || '\\n' === d || '\\r' === d) && !c && row.length) {\n        row.push(ans);\n        res.push(row);\n        d = ans = '';\n        row = [];\n        c = 0;\n      }\n\n      ans += d;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  res.push(row);\n  return res;\n};\n\nvar Home = function Home() {\n  var title = \"Bulk Upload form\";\n\n  var _useState = useState([]),\n      dataPost = _useState[0],\n      setDataPost = _useState[1];\n\n  var _useState2 = useState(),\n      amountSuccess = _useState2[0],\n      setASuccess = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      dataInvalid = _useState3[0],\n      setDataInvalid = _useState3[1];\n\n  var ConvertData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(csv) {\n      var dataArray, headers, result, success;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return csvToArray(csv);\n\n            case 2:\n              dataArray = _context.sent;\n              headers = dataArray[0];\n              result = dataArray.slice(1).reduce(function (o, row, i) {\n                var fields = row;\n                var mapData = {\n                  amenity: [],\n                  status: []\n                };\n                headers.map(function (name, j) {\n                  if (['agent_post', 'accept_agent'].includes(name)) {\n                    if (fields[j] === \"TRUE\") {\n                      mapData.status.push(name);\n                    }\n                  } else if (j < 13) {\n                    mapData[name] = fields[j] || \"not found\";\n                    if (!fields[j] && !mapData.id.match('error')) mapData.id += 'error';\n                  } else {\n                    if (fields[j]) {\n                      mapData.amenity.push(name);\n                    }\n                  }\n                });\n                o.push(mapData);\n                return o;\n              }, []);\n              success = result.filter(function (e) {\n                var _e$id;\n\n                return !((_e$id = e.id) === null || _e$id === void 0 ? void 0 : _e$id.match('error'));\n              });\n              setASuccess((success === null || success === void 0 ? void 0 : success.length) || 0);\n              setDataPost(result);\n              if ((success === null || success === void 0 ? void 0 : success.length) !== result.length) setDataInvalid(\"You havenâ€™t upload any bulk data yet\");else setDataInvalid(\"\");\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function ConvertData(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onEditPhoto = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event, id) {\n      var formData, file, newImg;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              formData = new FormData();\n              file = event.target.files[0];\n              formData.append('photo1', file);\n              _context2.next = 5;\n              return axios.post(\"/upload\", formData, {\n                headers: {\n                  \"Content-type\": \"multipart/form-data\"\n                }\n              }).then(function (res) {\n                return res === null || res === void 0 ? void 0 : res.data;\n              });\n\n            case 5:\n              newImg = _context2.sent;\n              _context2.next = 8;\n              return dataPost.map(function (e) {\n                if (e.id == id) {\n                  e.photo1 = newImg;\n                }\n\n                return e;\n              });\n\n            case 8:\n              dataPost = _context2.sent;\n              setDataPost(dataPost);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onEditPhoto(_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Container, null, __jsx(HeaderSyle, null, __jsx(Logo, {\n    src: \"/icons/logo.png\"\n  })), __jsx(Box, {\n    title: __jsx(React.Fragment, null, __jsx(\"h2\", null, title, \" \", dataInvalid ? __jsx(ExclamationCircleFilled, {\n      style: {\n        fontSize: '20px',\n        color: \"#0089FF\"\n      }\n    }) : \"\"), __jsx(\"p\", {\n      style: {\n        color: \"#0089FF\",\n        margin: 0\n      }\n    }, dataInvalid))\n  }, __jsx(\"h2\", null, \"Choose your an input medthod\"), __jsx(_Upload, {\n    accept: \".csv\",\n    showUploadList: false,\n    beforeUpload: function beforeUpload(file) {\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        ConvertData(e.target.result);\n      };\n\n      reader.readAsText(file); // Prevent upload\n\n      return false;\n    }\n  }, __jsx(ButtonUpload, null, __jsx(\"img\", {\n    style: {\n      margin: \"auto 0\"\n    },\n    src: \"/icons/space_bar.png\"\n  }), __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      margin: \"auto 0 auto 1vw\",\n      textAlign: \"start\"\n    }\n  }, __jsx(\"p\", {\n    style: {\n      fontWeight: 800\n    }\n  }, \"via CSV file\"), __jsx(\"p\", null, \"\\u0E2D\\u0E31\\u0E1B\\u0E40\\u0E14\\u0E15\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E08\\u0E32\\u0E01\\u0E44\\u0E1F\\u0E25\\u0E4C CSV\")))))), dataPost.length ? __jsx(ContentStyle, null, __jsx(ResultUpload, null, __jsx(\"div\", {\n    className: \"box\"\n  }, __jsx(\"h2\", null, amountSuccess)), __jsx(\"h2\", {\n    className: \"list\"\n  }, \"listings successfully and Ready to published\"), __jsx(_Row, {\n    display: \"flex\",\n    justifycontent: \"flex-end\"\n  }, __jsx(\"div\", {\n    style: {\n      margin: \"auto\",\n      display: \"flex\"\n    }\n  }, __jsx(\"img\", {\n    src: \"/icons/update.png\"\n  }), \" \", __jsx(\"p\", {\n    className: \"update\"\n  }, \"Update data\")), __jsx(\"div\", {\n    style: {\n      margin: \"auto 2vw\"\n    }\n  }, __jsx(\"img\", {\n    src: \"/icons/open_in_browser.png\"\n  })), __jsx(\"div\", {\n    style: {\n      margin: \"auto\"\n    }\n  }, __jsx(\"p\", {\n    style: {\n      margin: \"auto 1vw\",\n      color: \"#A6AAB4\"\n    }\n  }, \"Published\")))), __jsx(TableData, {\n    editPhoto: onEditPhoto,\n    rows: dataPost\n  })) : \"\");\n};\n\nexport default Home;\nvar ResultUpload = styled.div(_templateObject());\nvar ButtonUpload = styled(_Button)(_templateObject2());\nvar ContentStyle = styled.div(_templateObject3());\nvar Box = styled(_Card)(_templateObject4());\nvar Container = styled.div(_templateObject5());\nvar HeaderSyle = styled(Header)(_templateObject6());\nvar Logo = styled.img(_templateObject7());","map":null,"metadata":{},"sourceType":"module"}